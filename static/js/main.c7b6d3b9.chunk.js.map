{"version":3,"sources":["components/ImageGallery/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/ErrorSearch/ErrorSearch.module.css","components/LoadMoreBtn/LoadMoreBtn.module.css","components/Searchbar/Searchbar.js","services/pixabay-api.js","components/ImageGallery/ImageGalleryItem.js","components/Loader/Loader.js","img/error.png","components/ErrorSearch/ErrorSearch.js","components/LoadMoreBtn/LoadMoreBtn.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","this","className","s","searchbar","searchForm","type","searchFormBtn","searchFormBtnLabel","searchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchImg","page","url","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","src","alt","openModal","imageGalleryItem","imageGalleryItemImage","onClick","App","color","height","width","timeout","ErrorSearch","message","errorWrapper","role","errorImg","LoadMoreBtn","handleLoadMore","loadMoreBtn","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","overlay","modal","children","ImageGallery","images","showModal","modalImgProps","status","fetchImages","nextQuery","pixabayAPI","hits","length","prevState","catch","incrementPage","reset","scrollDown","setTimeout","scrollTo","top","document","body","scrollHeight","left","behavior","handleLoadBtnClick","a","searchQuery","toggleModal","handleImgClick","prevProps","prevQuery","modalImg","imageGallery","map","id","webformatURL","tags","largeImageURL","handleSearchFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"8GACAA,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,sBAAwB,kD,mBCAxGD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,mBCA3DD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,SAAW,iC,mBCA/ED,EAAOC,QAAU,CAAC,aAAe,oC,mBCAjCD,EAAOC,QAAU,CAAC,YAAc,mC,2KCIXC,E,4MAKnBC,MAAQ,CACNC,MAAO,I,EAGTC,kBAAoB,SAAAC,GAClB,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,cAAcC,MAAMC,iB,EAG/CC,aAAe,SAAAL,GAAM,IACXF,EAAU,EAAKD,MAAfC,MACRE,EAAEM,iBACmB,KAAjBR,EAAMS,QAIV,EAAKC,MAAMC,SAASX,GACpB,EAAKG,SAAS,CAAEH,MAAO,MAJrBY,IAAMC,MAAM,gC,uDAON,IACAb,EAAUc,KAAKf,MAAfC,MACR,OACE,mCACE,wBAAQe,UAAWC,IAAEC,UAArB,SACE,uBAAMF,UAAWC,IAAEE,WAAYP,SAAUG,KAAKP,aAA9C,UACE,wBAAQY,KAAK,SAASJ,UAAWC,IAAEI,cAAnC,SACE,sBAAML,UAAWC,IAAEK,mBAAnB,sBAEF,uBACEN,UAAWC,IAAEM,gBACbH,KAAK,OACLd,MAAOL,EACPuB,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZC,SAAUZ,KAAKb,+B,GAxCU0B,a,gCCSvC,IAIeC,EAJH,CACVC,SAZK,SAAkB7B,EAAO8B,GAC9B,IAAMC,EAAG,UAHM,0BAGN,uDAA6D/B,EAA7D,iBAA2E8B,EAA3E,4BAJK,sCAMd,OAAOE,MAAMD,GAAKE,MAAK,SAAAC,GACrB,OAAIA,EAASC,GACJD,EAASE,OAEXC,QAAQC,OAAO,IAAIC,MAAM,6B,iBCNrB,SAASC,EAAT,GAAyD,IAA7BC,EAA4B,EAA5BA,IAAKC,EAAuB,EAAvBA,IAAKX,EAAkB,EAAlBA,IAAKY,EAAa,EAAbA,UACxD,OACE,oBAAI5B,UAAWC,IAAE4B,iBAAjB,SACE,qBACEH,IAAKA,EACLC,IAAKA,EACL3B,UAAWC,IAAE6B,sBACbC,QAAS,kBAAMH,EAAU,CAAEZ,MAAKW,a,qBCPnBK,G,6KAEjB,OACE,cAAC,IAAD,CACE5B,KAAK,YACL6B,MAAM,UACNC,OAAQ,GACRC,MAAO,GACPC,QAAS,U,GARgBxB,cCJlB,MAA0B,kC,iBCK1B,SAASyB,EAAT,GAAmC,IAAZC,EAAW,EAAXA,QACpC,OACE,sBAAKtC,UAAWC,IAAEsC,aAAcC,KAAK,QAArC,UACE,4BAAIF,IACJ,qBAAKZ,IAAKe,EAAUd,IAAI,a,qBCLf,SAASe,EAAT,GAA0C,IAAnBC,EAAkB,EAAlBA,eACpC,OACE,wBACEvC,KAAK,SACLJ,UAAWC,IAAE2C,YACbb,QAAS,kBAAMY,KAHjB,uB,qBCFiBE,E,4MAanBC,cAAgB,SAAA3D,GACC,WAAXA,EAAE4D,MACJ,EAAKpD,MAAMqD,W,EAIfC,oBAAsB,SAAA9D,GAChBA,EAAEE,gBAAkBF,EAAE+D,QACxB,EAAKvD,MAAMqD,W,kEAfbG,OAAOC,iBAAiB,UAAWrD,KAAK+C,iB,6CAIxCK,OAAOE,oBAAoB,UAAWtD,KAAK+C,iB,+BAgB3C,OACE,qBAAK9C,UAAWC,IAAEqD,QAASvB,QAAShC,KAAKkD,oBAAzC,SACE,qBAAKjD,UAAWC,IAAEsD,MAAlB,SAA0BxD,KAAKJ,MAAM6D,iB,GA5BV5C,a,iBCMd6C,E,4MAKnBzE,MAAQ,CACN0E,OAAQ,GACR3C,KAAM,EACNjB,MAAO,KACP6D,WAAW,EACXC,cAAe,CAAE5C,IAAK,GAAIW,IAAK,IAC/BkC,OAAQ,Q,EAcVC,YAAc,SAAAC,GAAc,IAClBhD,EAAS,EAAK/B,MAAd+B,KACRiD,EACGlD,SAASiD,EAAWhD,GACpBG,MAAK,YAAe,IAAZ+C,EAAW,EAAXA,KACP,GAAoB,IAAhBA,EAAKC,OACP,OAAO5C,QAAQC,OAAO,IAAIC,MAAM,wBAGlC,EAAKpC,UAAS,SAAA+E,GAAS,MAAK,CAC1BT,OAAO,GAAD,mBAAMS,EAAUT,QAAhB,YAA2BO,IACjCJ,OAAQ,kBAGXO,OAAM,SAAAtE,GAAK,OAAI,EAAKV,SAAS,CAAEU,QAAO+D,OAAQ,iB,EAGnDQ,cAAgB,WACd,EAAKjF,UAAS,SAAA+E,GAAS,MAAK,CAAEpD,KAAMoD,EAAUpD,KAAO,O,EAGvDuD,MAAQ,WACN,EAAKlF,SAAS,CAAE2B,KAAM,EAAG2C,OAAQ,M,EAGnCa,WAAa,WACXC,YAAW,WACTrB,OAAOsB,SAAS,CACdC,IAAKC,SAASC,KAAKC,aACnBC,KAAM,EACNC,SAAU,aAEX,M,EAGLC,mB,sBAAqB,4BAAAC,EAAA,6DACblB,EAAY,EAAKpE,MAAMuF,YADV,SAEb,EAAKb,gBAFQ,OAGnB,EAAKP,YAAYC,GACjB,EAAKQ,aAJc,2C,EAOrBY,YAAc,WACZ,EAAK/F,UAAS,kBAAoB,CAAEuE,WAAtB,EAAGA,e,EAGnByB,eAAiB,SAAAzF,GACf,EAAKP,SAAS,CAAEwE,cAAejE,IAC/B,EAAKwF,e,0GA3DkBE,G,4EACjBC,EAAYD,EAAUH,YACtBnB,EAAYhE,KAAKJ,MAAMuF,YAEzBI,IAAcvB,E,gCACVhE,KAAKuE,Q,OACXvE,KAAKX,SAAS,CAAEyE,OAAQ,YACxB9D,KAAK+D,YAAYC,G,sIAuDX,IAAD,SACsChE,KAAKf,MAA1C0E,EADD,EACCA,OAAQ5D,EADT,EACSA,MAAO+D,EADhB,EACgBA,OAAQF,EADxB,EACwBA,UADxB,EAEc5D,KAAKf,MAAM4E,cAAxB5C,EAFD,EAECA,IAAKW,EAFN,EAEMA,IAEb,MAAe,SAAXkC,EACK,wBAGM,YAAXA,EACK,cAAC,EAAD,IAGM,aAAXA,EACK,cAACxB,EAAD,CAAaC,QAASxC,EAAMwC,UAEtB,aAAXuB,EAEA,qCACGF,GACC,cAAC,EAAD,CAAOX,QAASjD,KAAKoF,YAArB,SACE,qBAAKzD,IAAKV,EAAKW,IAAKA,EAAK3B,UAAWC,IAAEsF,aAG1C,oBAAIvF,UAAWC,IAAEuF,aAAjB,SACG9B,EAAO+B,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,aAAcC,EAArB,EAAqBA,KAAMC,EAA3B,EAA2BA,cAA3B,OACV,cAACpE,EAAD,CAEEC,IAAKiE,EACL3E,IAAK6E,EACLlE,IAAKiE,EACLhE,UAAW,EAAKwD,gBAJXM,QAQX,cAAChD,EAAD,CAAaC,eAAgB5C,KAAKiF,6BAnBxC,M,GA3FsCpE,aCJrBoB,E,4MACnBhD,MAAQ,CACNkG,YAAa,I,EAGfY,uBAAyB,SAAAZ,GACvB,EAAK9F,SAAS,CAAE8F,iB,uDAGR,IACAA,EAAgBnF,KAAKf,MAArBkG,YACR,OACE,qCACE,cAAC,EAAD,CAAWtF,SAAUG,KAAK+F,yBAC1B,cAAC,EAAD,CAAcZ,YAAaA,IAC3B,cAAC,IAAD,W,GAfyBtE,aCDjCmF,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtB,SAASuB,eAAe,U,kBCR1BrH,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,cAAgB,iCAAiC,mBAAqB,sCAAsC,gBAAkB,sC","file":"static/js/main.c7b6d3b9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__2nVEd\",\"imageGalleryItemImage\":\"ImageGalleryItem_imageGalleryItemImage__1lAT_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__3zI6S\",\"modal\":\"Modal_modal__3iZRX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__1rtY7\",\"modalImg\":\"ImageGallery_modalImg__2dTTr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorWrapper\":\"ErrorSearch_errorWrapper__3H3er\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loadMoreBtn\":\"LoadMoreBtn_loadMoreBtn__2u4LM\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    query: '',\n  };\n\n  handleQueryChange = e => {\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    const { query } = this.state;\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Please, enter search query.');\n      return;\n    }\n    this.props.onSubmit(query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n    return (\n      <>\n        <header className={s.searchbar}>\n          <form className={s.searchForm} onSubmit={this.handleSubmit}>\n            <button type=\"submit\" className={s.searchFormBtn}>\n              <span className={s.searchFormBtnLabel}>Search</span>\n            </button>\n            <input\n              className={s.searchFormInput}\n              type=\"text\"\n              value={query}\n              autoComplete=\"off\"\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={this.handleQueryChange}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n","const API_KEY = '19232592-72d20f794acedbda632f0e7bd';\nconst BASE_URL = 'https://pixabay.com/api';\n\nexport function fetchImg(query, page) {\n  const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=${API_KEY}`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error('Oops! Nothing found'));\n  });\n}\n\nconst api = {\n  fetchImg,\n};\n\nexport default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={s.imageGalleryItem}>\n      <img\n        src={src}\n        alt={alt}\n        className={s.imageGalleryItemImage}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class App extends Component {\n  render() {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#df4e78\"\n        height={80}\n        width={80}\n        timeout={3000} //3 secs\n      />\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/error.1bb9a542.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport errorImg from 'img/error.png';\nimport s from './ErrorSearch.module.css';\n\nexport default function ErrorSearch({ message }) {\n  return (\n    <div className={s.errorWrapper} role=\"alert\">\n      <p>{message}</p>\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nErrorSearch.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './LoadMoreBtn.module.css';\n\nexport default function LoadMoreBtn({ handleLoadMore }) {\n  return (\n    <button\n      type=\"button\"\n      className={s.loadMoreBtn}\n      onClick={() => handleLoadMore()}\n    >\n      Load more\n    </button>\n  );\n}\n\nLoadMoreBtn.propTypes = {\n  handleLoadMore: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>{this.props.children}</div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport pixabayAPI from 'services/pixabay-api';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport Loader from 'components/Loader';\nimport ErrorSearch from 'components/ErrorSearch';\nimport LoadMoreBtn from 'components/LoadMoreBtn';\nimport Modal from 'components/Modal';\nimport s from './ImageGallery.module.css';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    searchQuery: PropTypes.string,\n  };\n\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    showModal: false,\n    modalImgProps: { url: '', alt: '' },\n    status: 'idle',\n  };\n\n  async componentDidUpdate(prevProps) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      await this.reset();\n      this.setState({ status: 'pending' });\n      this.fetchImages(nextQuery);\n    }\n  }\n\n  fetchImages = nextQuery => {\n    const { page } = this.state;\n    pixabayAPI\n      .fetchImg(nextQuery, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return Promise.reject(new Error('Oops! Nothing found'));\n        }\n\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  incrementPage = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  reset = () => {\n    this.setState({ page: 1, images: [] });\n  };\n\n  scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  handleLoadBtnClick = async () => {\n    const nextQuery = this.props.searchQuery;\n    await this.incrementPage();\n    this.fetchImages(nextQuery);\n    this.scrollDown();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  handleImgClick = props => {\n    this.setState({ modalImgProps: props });\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, error, status, showModal } = this.state;\n    const { url, alt } = this.state.modalImgProps;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return <Loader />;\n    }\n\n    if (status === 'rejected') {\n      return <ErrorSearch message={error.message} />;\n    }\n    if (status === 'resolved') {\n      return (\n        <>\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={url} alt={alt} className={s.modalImg} />\n            </Modal>\n          )}\n          <ul className={s.imageGallery}>\n            {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n              <ImageGalleryItem\n                key={id}\n                src={webformatURL}\n                url={largeImageURL}\n                alt={tags}\n                openModal={this.handleImgClick}\n              />\n            ))}\n          </ul>\n          <LoadMoreBtn handleLoadMore={this.handleLoadBtnClick} />\n        </>\n      );\n    }\n  }\n}\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from 'components/Searchbar';\nimport ImageGallery from 'components/ImageGallery';\n\nexport default class App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleSearchFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSearchFormSubmit} />\n        <ImageGallery searchQuery={searchQuery} />\n        <ToastContainer />\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'index.css';\nimport App from 'App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1dZKS\",\"searchForm\":\"Searchbar_searchForm__1bDIW\",\"searchFormBtn\":\"Searchbar_searchFormBtn__3lSDV\",\"searchFormBtnLabel\":\"Searchbar_searchFormBtnLabel__CxEkn\",\"searchFormInput\":\"Searchbar_searchFormInput__TjGtY\"};"],"sourceRoot":""}